<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="theme-color" content="#202020"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="keywords" content="HTML,Android,"><meta name="description" content="Android使用base64(Base64.NO_WRAP)并显示到html.img标签中的正确方式"><link rel="icon" type="image/x-icon" href="/logo.png"><title>Android使用base64(Base64.NO_WRAP)并显示到html.img标签中的正确方式 [ 大新闻 ]</title><link rel="stylesheet" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" href="/css/microb.css"></head><body><nav class="home-menu pure-menu pure-menu-horizontal pure-menu-fixed"><ul class="pure-menu-list float-r clearfix"><li class="pure-menu-item toc-menu"><a id="menu-main-post" class="pure-menu-link" href="javascript:;"><img class="menu-icon" src="/logo.png" alt="MENU"></a></li></ul><a class="pure-menu-heading" href="/"><h1 class="title">大新闻</h1></a></nav><div class="container" id="content-outer"><div class="inner" id="content-inner"><article class="post" id="post"><header class="post-header text-center"><h1 class="title">Android使用base64(Base64.NO_WRAP)并显示到html.img标签中的正确方式</h1><time class="time" datetime="2017-10-30T03:06:56.000Z">2017-10-30</time><hr></header><div class="post-content"><p>Android使用android.util.Base64.encodeToString(字符串.getBytes(),Base64.NO_WRAP)序列化图片，并且支持显示到网页img标签的格式正确方式。</p><a id="more"></a><div class="note danger"><p>错误的示范：<code>android.util.Base64.encodeToString(字符串.getBytes(),Base64.DEFAULT);</code></p></div><p>网上搜到的Android截屏为base64方法，大都为:</p><p><code>android.util.Base64.encodeToString(字符串.getBytes(),Base64.DEFAULT);</code></p><p>注意此处<strong>Base64.DEFAULT</strong>，如果仅在Android系统中使用Java代码共享数据，那完全没问题。如果要显示到html的img标签中，那就识别不了。</p><div class="note success"><p>正确的序列化方式为: <code>android.util.Base64.encodeToString(字符串.getBytes(),Base64.NO_WRAP);</code></p></div><p>也就是使用<strong>Base64.NO_WRAP</strong>代替Base64.DEFAULT.</p><p><img src="1.png" alt=""></p><p>原因是Base64.DEFAULT选项输出了\n字符。大概每行在76字，字符串默认也会追加一个\n。</p><p><img src="2.png" alt=""></p><p>参考：<a href="https://developer.android.com/reference/android/util/Base64.html" target="_blank" rel="noopener">https://developer.android.com/reference/android/util/Base64.html</a></p></div><div class="post-tags"><ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTML/">HTML</a></li></ul></div></article><div class="post-nav"><div class="post-nav-item post-nav-next"><a href="/2017/09/08/2017/spring-dynamic-create-remoting-invoker/" rel="next" title="Spring远程调用-HttpInvokerProxyFactoryBean和HttpInvokerServiceExporter"><span>〈 </span>Spring远程调用-HttpInvokerProxyFactoryBean和HttpInvokerServiceExporter</a></div><div class="post-nav-item post-nav-prev"><a href="/2017/11/06/2017/css-margin-padding-percentages-relative-width/" rel="prev" title="前端规范实践">前端规范实践 <span>〉</span></a></div></div></div></div><footer class="footer text-center"><div id="bottom-inner"><a href="http://hexo.io" target="_blank" class="footer-link">Hexo</a> <a href="https://github.com/microacup/hexo-theme-micorb" target="_blank" class="footer-link">Theme microb</a></div></footer><script>var titleTime,originTitle=document.title;document.addEventListener("visibilitychange",function(){document.hidden?(document.title="[闷声发大财中...] "+originTitle,clearTimeout(titleTime)):(document.title="[+1s] "+originTitle,titleTime=setTimeout(function(){document.title=originTitle},2e3))})</script><script>!function(e,t){e.requestAnimationFrame=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},function(){var e=t.getElementById("menu-main-post");if(e){var n=t.getElementById("toc");e.title=n?"目录":"回到顶部",e.onclick=function(){n?"block"==n.style.display?n.style.display="none":n.style.display="block":(cancelAnimationFrame(o),o=requestAnimationFrame(function e(){var n=t.body.scrollTop||t.documentElement.scrollTop;0<n?(t.body.scrollTop=t.documentElement.scrollTop=n-50,o=requestAnimationFrame(e)):cancelAnimationFrame(o)}))}}}();var o=null}(window,document)</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b6d76ecb62c0651d8e5b7f7085f443f1";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script>!function(e,a,t,n,g,c,o){e.GoogleAnalyticsObject="ga",e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),o=a.getElementsByTagName(t)[0],c.async=1,c.src="//www.google-analytics.com/analytics.js",o.parentNode.insertBefore(c,o)}(window,document,"script"),ga("create","UA-78267963-1","auto"),ga("send","pageview")</script></body></html>